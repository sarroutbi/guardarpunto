<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>GuardarPunto - Ficha Juego</title>
    <!-- Custom styles for this template -->
    <link href="/css/FichaJuegoCSS.css" rel="stylesheet" type="text/css">

    <!-- SCRIPTS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    
    <!-- Font Awesome Icon Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      
    
    <!--Enlaces para la pantalla de registro-->
    <link rel="stylesheet"	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- <script	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
      
      <!-- Script propio para botones y demas-->
    <script src="/js/FichaJuego.js"></script> 
    
		
    <style>
    body { background-color: #a9d5cb; }
    </style>


  </head>

  <body>
  
  	<!--  Alert si se intenta añadir comentario o review sin haber hecho login -->
    {{{alert}}}

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div id="navbar" class="navbar-collapse collapse">
        <form id="buscador" class="form-inline" action="/buscar" method="post">
          <ul id="elementosNavBar" class="nav navbar-nav">
            <li><a id="log" href="/">Guardar Punto</a></li>
            <li><a id="elem" href="/">Inicio</a></li>
            <li><a id="elem" href="/Juegos">Juegos</a></li>
            <li><a id="elem" href="/Perfil">Perfil</a></li>
            <li><a id="elem" href="/Reviews">Reviews</a></li>
            <li><a id="elem" href="/Amigos">Amigos</a></li>             
            <li>           	  
              	<input id="bus" class="form-control" type="text" placeholder="Buscar" name="txt">           		
            </li>
            <li>
              <button id="bot" class="btn" type="submit">Buscar</button>
              <input type="hidden" name="_csrf" value="{{token}}"/>
              </form>
            </li>
            <li>
            	<div id="off" style="display: {{displayOff}}">
            		<form action="/logout" id="OffForm" method="post">
	              	<button type="submit" class="btn">
	             	<span class="glyphicon glyphicon-off"></span> 
              		</button>
              		<input type="hidden" name="_csrf" value="{{token}}"/>	
              		</form>
            	</div>
            </li>
            </ul>            
      </div>
    </nav>

    <div  class="row row-offcanvas row-offcanvas-right">
      <div  class="col-md-1"></div> <!-- margen izquierdo -->

      <div  id="centro" class="col-md-7">
        <!-- posicion resto de elementos-->
        <h2 class="listaJuegos">{{juego.title}}</h2>
        <div class="datosJuego">
              <div class="colImagen">
                    <img src="{{juego.imagen}}" width="160px" height="226px">
                    <div id="anadirALista">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Añadir a lista
                        <span class="caret"></span></button>
                        <ul class="dropdown-menu">
                            <li><a href="/anadirLista/pendiente/{{juego.id}}/1">Quiero jugar</a></li>
                            <li><a href="/anadirLista/jugando/{{juego.id}}/1">Estoy jugando</a></li>
                            <li><a href="/anadirLista/jugado/{{juego.id}}/1">Jugado</a></li>
                        </ul>
                    </div>
              </div>

              <div class="text tituloDato">
                <p>Compañía:</p>
                <p>Año:</p>
                <p>Género:</p>
                <p>Plataforma:</p>
            </div>
              <div class="text dato">
                <p>{{juego.compannia}}</p>
                <p>{{juego.anyo}}</p>
                <p>{{juego.genero}}</p>
                <p>{{juego.plataforma}}</p>
            </div>
            <div class="cuadroPuntuacion">{{juego.valoracion}}</div>
            <div class="text resumen" style="word-wrap: break-word;">
                <h4 style="font-weight: bold;">Resumen</h4>
                <p>{{juego.resumen}}</p>
            </div>
        </div>

        <!-- Apartado de reviews -->
        <div class="seccionReviews">
            <h3 class="seccionReviews">Reviews</h3>
            <form action="/nuevaReview" method="post">
	            <textarea id="nuevaReview" name="texto" rows="5" style="width: 80%;">Nueva review</textarea>
	            <div id="reviewPtosEnviar">
	                <input type="number" name="puntuacion" min="1" max="5" step="0.5" required> 
	                <input type="hidden" name="id_juego" value="{{juego.id}}"/>
                    <input type="hidden" name="id_usuario" value="1"/>       
                    <input type="hidden" name="_csrf" value="{{token}}"/>      
	                <p><button type="submit" style="margin-top: 5px;">Enviar</button></p>
	            </div>
            </form>

            <ul id="listaReviews" style="list-style-type : none;">
                {{#listaReviews}}
                <li class="review" style="display: flex;">
                    <div class="imgUsuario" style="float: left;">
                        <img src="{{user.imagen}}" width="80px" height="113px">
                    </div>
                    <div class="resto" style="display: flex; flex-direction: column;">
                        <a style="font-weight: bold;" href="/Usuario/{{user.id}}">{{user.nombre}}</a>  
                        <div class="cuadroPuntuacionReview">{{puntuacion}}</div>                      
                        <p>{{primeraLinea}}...</p>

                        <div id="textoCompleto{{id}}" class="collapse" style="word-wrap: break-word;">
                            {{texto}}
                        </div>
                        <a href="#textoCompleto{{id}}" data-toggle="collapse">Leer más</a>
                    </div>
                </li>                
            {{/listaReviews}}
            </ul>

        </div>
      </div>

      <div id="der" class="col-md-3">
        <!-- Columna derecha con login, noticias... -->
        <div class="flex-container derecha">

            <div class="comentarios" id="comentarios">
                <h3 class="tituloSeccion">Comentarios</h3>

                <div class="anadirComentario" style="margin-bottom: 8px;">
                	<form action="/nuevoComentario" method="post">
	                    <textarea id="nuevoComentario" rows="2" style="width: 100%;" maxlength="100" name="texto">Nuevo comentario</textarea>
	                    <input type="hidden" name="id_juego" value="{{juego.id}}"/>	                    
	                    <button type="submit">Enviar</button>
	                    <input type="hidden" name="_csrf" value="{{token}}"/>
                  	</form>
                </div>

                <!-- Lista de comentarios -->
                <ul id="listaComentarios" style="list-style-type : none;">
                    {{#listaComentarios}}
                    <li class="comentario" style="display: flex;">
                        <div class="imgUsuario" style="float: left;">
                            <img src="{{user.imagen}}" width="40px" height="56.5px">
                        </div>
                        <div class="resto">
                            <a href="/Usuario/{{user.id}}" style="font-weight: bold; font-size: 15px;">{{user.nombre}}</a>
                        
                            <p>{{texto}}</p>
                        </div>
                    </li>                   
                {{/listaComentarios}}
                </ul>                                             
            </div>            

        </div>
      </div>
    </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
